{% extends 'base.html.twig' %}

{% block title %}Lieu{% endblock %}

{% block body %}
    <h1 class="title">{{ lieu.nom }}</h1>

    <div class="buttons mb-4">
        <a href="{{ path('app_lieu_index') }}" class="button is-link">
            <span class="icon"><i class="fas fa-arrow-left"></i></span>
            <span>Retour à la liste</span>
        </a>
        {% if is_granted('ROLE_USER') %}
            <a href="{{ path('app_lieu_edit', {'id': lieu.id}) }}" class="button is-warning">
                <span class="icon"><i class="fas fa-edit"></i></span>
                <span>Modifier</span>
            </a>
        {% endif %}
        {% if is_granted('ROLE_ADMIN') %}
            <form method="post" action="{{ path('app_lieu_delete', {'id': lieu.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer ce lieu ?');" style="display: inline-block;">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ lieu.id) }}">
                <button class="button is-danger">
                    <span class="icon"><i class="fas fa-trash"></i></span>
                    <span>Supprimer</span>
                </button>
            </form>
        {% endif %}
    </div>

    <div class="box">
        <div class="columns">
            <div class="column">
                <table class="table is-striped is-fullwidth">
                    <tbody>
                    <tr>
                        <th>Nom</th>
                        <td>{{ lieu.nom }}</td>
                    </tr>
                    <tr>
                        <th>Rue</th>
                        <td>{{ lieu.rue }}</td>
                    </tr>
                    <tr>
                        <th>Ville</th>
                        <td>{{ lieu.ville }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="column">
                <table class="table is-striped is-fullwidth">
                    <tbody>
                    <tr>
                        <th>Code Postal</th>
                        <td>{{ lieu.codePostal }}</td>
                    </tr>
                    <tr>
                        <th>Latitude</th>
                        <td>{{ lieu.latitude }}</td>
                    </tr>
                    <tr>
                        <th>Longitude</th>
                        <td>{{ lieu.longitude }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="box">
        <h2 class="title is-4">Carte</h2>
        <div id="map" style="height: 50vh; width: 100%; border-radius: 10px"></div>
        {{ mapScript|raw }}

        <div class="mt-4">
            <a href="https://www.google.com/maps?q={{ lieu.latitude }},{{ lieu.longitude }}" target="_blank" class="button is-info">
                <span class="icon"><i class="fas fa-map-marker-alt"></i></span>
                <span>Voir sur Google Maps</span>
            </a>
        </div>
    </div>
{% endblock %}

